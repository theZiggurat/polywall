(this["webpackJsonpreact-webgl"]=this["webpackJsonpreact-webgl"]||[]).push([[0],{198:function(e,t,n){e.exports=n(442)},203:function(e,t,n){},204:function(e,t,n){},205:function(e,t,n){},369:function(e,t,n){},431:function(e,t,n){},439:function(e,t,n){},440:function(e,t,n){},441:function(e,t,n){},442:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),r=n(9),s=n.n(r),o=(n(203),n(204),n(16)),l=n(19),c=n(22),u=n(20),h=n(21),m=n(11),p=new(function(){function e(){Object(o.a)(this,e),this.leftbound=-25,this.rightbound=25,this.topbound=10,this.bottombound=-10,this.lateralOffsetMultiplier=.5,this.depthOffsetMultiplier=.4,this.trisize=.4}return Object(l.a)(e,[{key:"generate",value:function(e){for(var t=new m.f,n=0,a=Math.ceil((this.rightbound-this.leftbound)/this.trisize),i=Math.ceil((this.topbound-this.bottombound)/this.trisize),r=new m.b(e),s=[],o=0;o<a;o++){s[o]=[];for(var l=0;l<i;l++)s[o][l]=new m.p((Math.random()-.5)*this.trisize*this.lateralOffsetMultiplier,(Math.random()-.5)*this.trisize*this.lateralOffsetMultiplier,Math.random()*this.depthOffsetMultiplier)}for(var c=0;c<a-1;c++)for(var u=0;u<i-1;u++){var h=this.leftbound+c*this.trisize,p=this.bottombound+u*this.trisize;t.vertices.push(new m.p(h+s[c][u].x,p+s[c][u].y,s[c][u].z),new m.p(h+s[c][u+1].x,p+this.trisize+s[c][u+1].y,s[c][u+1].z),new m.p(h+this.trisize+s[c+1][u+1].x,p+this.trisize+s[c+1][u+1].y,s[c+1][u+1].z),new m.p(h+this.trisize+s[c+1][u].x,p+s[c+1][u].y,s[c+1][u].z));var d=n,g=new m.d(d+1,d,d+2);g.color=this.generateColor(r);var f=new m.d(d+2,d,d+3);f.color=this.generateColor(r),t.faces.push(g,f),n+=4}return t.computeFaceNormals(),this.assignUVs(t),t}},{key:"assignUVs",value:function(e){e.computeBoundingBox();var t=e.boundingBox.max,n=e.boundingBox.min,a=new m.o(0-n.x,0-n.y),i=new m.o(t.x-n.x,t.y-n.y),r=e.faces;e.faceVertexUvs[0]=[];for(var s=0;s<r.length;s++){var o=e.vertices[r[s].a],l=e.vertices[r[s].b],c=e.vertices[r[s].c];e.faceVertexUvs[0].push([new m.o((o.x+a.x)/i.x*2,(o.y+a.y)/i.y*2),new m.o((l.x+a.x)/i.x*2,(l.y+a.y)/i.y*2),new m.o((c.x+a.x)/i.x*2,(c.y+a.y)/i.y*2)])}e.uvsNeedUpdate=!0}},{key:"generateColor",value:function(e){return e.clone().addScalar(.1*Math.random())}},{key:"setTriSize",value:function(e){console.log(e),this.trisize=e}}]),e}()),d="https://i.imgur.com/jCBeabr.jpg",g="https://i.imgur.com/foiWxsQ.png",f="#ffffff",v=new(function(){function e(){var t=this;Object(o.a)(this,e),this.updateMouse=function(e){t.dx=e.clientX-t.canvas.clientWidth/2,t.dy=e.clientY-t.canvas.clientHeight/2,t.ndc.x=e.clientX/window.innerWidth*2-1,t.ndc.y=-e.clientY/window.innerHeight*2+1},this.render=function(){if(requestAnimationFrame(t.render),t.dragging&&t.control){var e=new m.p(t.ndc.x,t.ndc.y,.5);e.unproject(t.camera);var n=e.sub(t.camera.position).normalize(),a=-t.camera.position.z/n.z,i=t.camera.position.clone().add(n.multiplyScalar(a));i.z+=2,t.control.position.copy(i)}t.renderer.render(t.scene,t.camera)},this.materialSettings={roughness:1,roughnessMap:null,roughnessMapChanged:!0,vertexColors:m.e},this.sceneSettings={ambientColor:"#0055AA",ambientIntensity:.5,dirColor:"#FFFFFF",dirIntensity:.9},this.scene=new m.m,this.raycaster=new m.k,this.scene.background=new m.b(3355443),this.material=new m.h({}),this.loader=(new m.n).setCrossOrigin(!0),this.lastX=0,this.lastY=0,this.dx=0,this.dy=0,this.dragging=!1,this.ndc=new m.o,this.genModel=this.genModel.bind(this),this.registerCanvas=this.registerCanvas.bind(this),this.registerLight=this.registerLight.bind(this),this.updateLightColor=this.updateLightColor.bind(this),this.updateLightIntensity=this.updateLightIntensity.bind(this),this.updateMaterial=this.updateMaterial.bind(this),this.deleteLight=this.deleteLight.bind(this),this.control=null}return Object(l.a)(e,[{key:"registerCanvas",value:function(e){var t=this;this.canvas=document.getElementById(e),this.camera=new m.i(75,this.canvas.clientWidth/this.canvas.clientHeight,.1,1e3),this.camera.position.z=2.5,this.renderer=new m.q({canvas:this.canvas,preserveDrawingBuffer:!0,antialias:!0}),this.renderer.setSize(this.canvas.clientWidth,this.canvas.clientHeight),this.canvas.addEventListener("mousedown",(function(e){e.preventDefault(),t.setDrag(!0)})),this.canvas.addEventListener("mouseup",(function(e){return t.setDrag(!1)})),this.canvas.addEventListener("mouseleave",(function(e){return t.setDrag(!1)})),this.canvas.addEventListener("mousemove",this.updateMouse),this.canvas.addEventListener("wheel",(function(e){t.camera.position.z=Math.min(10,Math.max(2,t.camera.position.z+.002*e.deltaY)),e.preventDefault()}));var n=function(e){t.camera.aspect=window.innerWidth/window.innerHeight,t.camera.updateProjectionMatrix(),t.renderer.setSize(window.innerWidth,window.innerHeight)};this.canvas.addEventListener("resize",n),window.addEventListener("resize",n)}},{key:"registerLight",value:function(e,t){var n;switch(console.log(e,t),e){case"Point":(n=new m.j(f)).intensity=1;break;case"Directional":n=new m.c(f);break;case"Ambient":n=new m.a(f);break;default:return}n.name=t,this.scene.add(n)}},{key:"deleteLight",value:function(e){this.scene.remove(this.scene.getObjectByName(e))}},{key:"updateLightColor",value:function(e,t){var n=this.scene.getObjectByName(e);void 0!==n&&(n.color=new m.b(t.hex))}},{key:"updateLightIntensity",value:function(e,t){var n=this.scene.getObjectByName(e);void 0!==n&&(n.intensity=t)}},{key:"setControl",value:function(e){if(e){var t=this.scene.getObjectByName(e);t&&(this.control=t)}else this.control=null}},{key:"genModel",value:function(){console.log(this),this.mesh=p.generate("#EEE"),this.scene.remove(this.model),this.model=new m.g(this.mesh,this.material),this.model.name="wallpaper",this.scene.add(this.model)}},{key:"updateMaterial",value:function(){var e=this;this.materialSettings.roughnessMap&&this.materialSettings.roughnessMapChanged?(this.loader.load(this.materialSettings.roughnessMap,(function(t){console.log(t),t.repeat=new m.o(4,4),t.wrapS=m.l,t.wrapT=m.l,t.anisotropy=e.renderer.capabilities.getMaxAnisotropy(),e.material.roughnessMap=t})),this.materialSettings.roughnessMapChanged=!1):this.material.roughnessMap=null,this.material.vertexColors=m.e,this.material.roughness=this.materialSettings.roughness,this.material.needsUpdate=!0}},{key:"setDrag",value:function(e){this.dragging=e}}]),e}()),b=(n(205),function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){v.registerCanvas("three"),v.updateMaterial(),v.genModel(),v.render()}},{key:"render",value:function(){return i.a.createElement("div",{className:"viewer"},i.a.createElement("canvas",{id:"three",className:"canvas"}))}}]),t}(i.a.Component)),y=n(94),E=n(195),w=n(28),O=n(187),j=n.n(O),C=(n(369),n(443)),x=n(100),k=n(63),N=n(36),M=n(444),z=n(447),S=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).remove=function(){n.props.remove(n.props.name)},n.control=function(){n.props.control(Object(w.a)(n))},n.onColor=n.onColor.bind(Object(w.a)(n)),n.onIntensity=n.onIntensity.bind(Object(w.a)(n)),n.remove=n.remove.bind(Object(w.a)(n)),n.control=n.control.bind(Object(w.a)(n)),n.componentDidMount=function(){return v.registerLight(n.props.type,n.props.name)},n.componentWillUnmount=function(){return v.deleteLight(n.props.name)},n.state={control:!1,color:n.props.color,intensity:1},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"onColor",value:function(e){void 0!==e&&(v.updateLightColor(this.props.name,e),this.setState({color:e}))}},{key:"onIntensity",value:function(e){this.setState({intensity:e}),v.updateLightIntensity(this.props.name,e)}},{key:"render",value:function(){return i.a.createElement(C.a,{size:"small",title:this.props.name,className:"card",extra:i.a.createElement("div",{className:"buttonHolder"},i.a.createElement(x.a,{size:"small",type:"danger",icon:"delete",className:"button",onClick:this.remove}),i.a.createElement(x.a,{size:"small",className:"button",type:this.state.control?"primary":"dashed",onClick:this.control,disabled:"Ambient"==this.props.type},"Control"))},i.a.createElement(j.a,{className:"picker",onChange:this.onColor,color:this.state.color}),i.a.createElement(L,{initVal:1,step:.05,min:0,max:3,onChange:this.onIntensity}))}}]),t}(i.a.Component),L=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={intensity:n.props.initVal},n.onChange=function(e){isNaN(e)||(n.setState({intensity:e}),n.props.onChange(e))},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.intensity;return i.a.createElement("div",null,i.a.createElement(k.a,null,i.a.createElement(N.a,{span:8,className:"title"},"Intensity:"),i.a.createElement(N.a,{span:8,className:"slider"},i.a.createElement(M.a,{className:"slider-main",min:this.props.min,max:this.props.max,onChange:this.onChange,value:"number"===typeof e?e:0,step:this.props.step})),i.a.createElement(N.a,{span:2},i.a.createElement(z.a,{className:"input",min:this.props.min,max:this.props.max,style:{marginLeft:16},step:this.props.step,value:e,onChange:this.onChange}))))}}]),t}(i.a.Component),D=n(445),F=n(448),I=n(446),V=n(17);n(431);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var A=function(e){var t=e.name,n=e.color,a=e.type,r=e.remove,s=e.control;return i.a.createElement(S,{name:t,color:n,type:a,remove:r,control:s})},B=function(e){var t=e.list,n=e.remove,a=e.control;return i.a.createElement("div",{className:"list"},t.map((function(e,t){return i.a.createElement(A,{name:e.name,color:e.color,type:e.type,remove:n,control:a,key:t})})))},T=function(e){var t=e.addlight;return i.a.createElement(D.a,{className:"menu"},i.a.createElement(D.a.Item,{onClick:function(){return t("Directional")}},"Directional Light"),i.a.createElement(D.a.Item,{onClick:function(){return t("Ambient")}},"Ambient Light"),i.a.createElement(D.a.Item,{onClick:function(){return t("Point")}},"Point Light"))},W=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).addLight=function(t){var n=e.state,a=n.lights,i=n.types,r=(n.control,i[t]+1),s="".concat(t," ").concat(r),o=[].concat(Object(E.a)(a),[{name:s,color:"#fff",type:t}]),l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(n,!0).forEach((function(t){Object(y.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i,{type:i[t]++});e.setState({lights:o,types:l})},e.removeLight=function(t){var n=e.state.lights.filter((function(e,n,a){return e.name!=t}));e.setState({lights:n})},e.setControl=function(t){if(t.state.control)return t.setState({control:!1}),e.setState({control:null}),void v.setControl(null);t.setState({control:!0});var n=e.state.control;null!=n&&n.setState({control:!1}),e.setState({control:t}),v.setControl(t.props.name),e.firstTime&&(F.a.info("Drag the mouse to move light source",10),e.firstTime=!1)},e.state={lights:[{name:"Directional 1",color:"#FFFFFF",type:"Directional"},{name:"Ambient 1",color:"#FFFFFF",type:"Ambient"}],types:{Ambient:1,Directional:1,Point:0},control:null},e.firstTime=!0,e.addLight=e.addLight.bind(Object(w.a)(e)),e.removeLight=e.removeLight.bind(Object(w.a)(e)),e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.lights;return i.a.createElement(C.a,{title:"Colors",size:"small",className:"card grow",extra:i.a.createElement(I.a,{overlay:i.a.createElement(T,{addlight:this.addLight})},i.a.createElement(x.a,{type:"default",size:"small"},"Add Light ",i.a.createElement(V.a,{type:"down"})))},i.a.createElement(B,{list:e,remove:this.removeLight,control:this.setControl}))}}]),t}(i.a.Component),Y=(n(439),function(e){var t=e.changeTexture;return i.a.createElement(D.a,{className:"menu"},i.a.createElement(D.a.Item,{onClick:function(){return t(d)}},"Metal"),i.a.createElement(D.a.Item,{onClick:function(){return t(g)}},"Stucco"),i.a.createElement(D.a.Item,{onClick:function(){return t(null)}},"None"))}),X=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).changeTexture=function(e){v.materialSettings.roughnessMap=e,v.materialSettings.roughnessMapChanged=!0,v.updateMaterial()},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement(C.a,{size:"small",title:"Mesh Settings",className:"card basis"},i.a.createElement("div",{className:"divider"},i.a.createElement(k.a,{className:"meshSettings"},i.a.createElement(H,{title:"Triangle Size:",onNewVal:function(e){return p.trisize=e},min:.2,max:1,step:.02,initialVal:.4})),i.a.createElement(k.a,{className:"meshSettings"},i.a.createElement(H,{title:"Depth offset:",onNewVal:function(e){return p.depthOffsetMultiplier=e},min:.2,max:1,step:.02,initialVal:.4})),i.a.createElement(k.a,{className:"meshSettings"},i.a.createElement(H,{title:"Lateral offset:",onNewVal:function(e){return p.lateralOffsetMultiplier=e},min:.2,max:1,step:.02,initialVal:.4})),i.a.createElement(k.a,{style:{marginTop:"10px"}},i.a.createElement(I.a,{overlay:i.a.createElement(Y,{changeTexture:this.changeTexture})},i.a.createElement(x.a,{type:"default"},"Texture ",i.a.createElement(V.a,{type:"down"})))),i.a.createElement(x.a,{type:"primary",className:"generate",onClick:v.genModel},"Generate")))}}]),t}(i.a.Component),H=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={inputValue:n.props.initialVal},n.onChange=function(e){isNaN(e)||(n.setState({inputValue:e}),n.props.onNewVal(e))},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.inputValue;return i.a.createElement("div",null,i.a.createElement(k.a,null,i.a.createElement(N.a,{span:8,className:"title"},this.props.title),i.a.createElement(N.a,{span:8,className:"slider"},i.a.createElement(M.a,{className:"slider-main",min:this.props.min,max:this.props.max,onChange:this.onChange,value:"number"===typeof e?e:0,step:this.props.step})),i.a.createElement(N.a,{span:2},i.a.createElement(z.a,{className:"input",min:this.props.min,max:this.props.max,style:{marginLeft:16},step:this.props.step,value:e,onChange:this.onChange}))))}}]),t}(i.a.Component),U=(n(440),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).onGenerate=function(){F.a.info("Generating...",1,(function(){return F.a.success("Done! Click Download")}));var e=v.renderer.getSize();v.renderer.setSize(n.state.resX,n.state.resY),v.camera.aspect=n.state.resX/n.state.resY,v.camera.updateProjectionMatrix(),v.renderer.render(v.scene,v.camera);var t=v.canvas.toDataURL("image/png");n.setState({url:t}),v.renderer.setSize(e.x,e.y),v.camera.aspect=e.x/e.y,v.camera.updateProjectionMatrix()},n.onChangeX=function(e){return n.setState({resX:e})},n.onChangeY=function(e){return n.setState({resY:e})},n.state={url:null,resX:1920,resY:1080},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement(C.a,{title:"Publish",size:"small",className:"card basis"},i.a.createElement("div",{className:"publish"},i.a.createElement(x.a,{type:"primary",size:"large",onClick:this.onGenerate},"Generate"),i.a.createElement(k.a,null,i.a.createElement(N.a,null,"Resoltion Width:"),i.a.createElement(N.a,null,i.a.createElement(z.a,{min:800,max:4096,defaultValue:1920,onChange:this.onChangeX}))),i.a.createElement(k.a,null,i.a.createElement(N.a,null,"Resoltion Height:"),i.a.createElement(N.a,null,i.a.createElement(z.a,{min:400,max:2160,defaultValue:1080,onChange:this.onChangeY}))),i.a.createElement(x.a,{type:"primary",size:"large",className:"download",href:this.state.url,download:"polywall.png"},"Download")))}}]),t}(i.a.Component)),G=[{key:"tab1",tab:"tab1"},{key:"tab2",tab:"tab2"}],R={tab1:i.a.createElement("p",{className:"tab"},"content1"),tab2:i.a.createElement("p",{className:"tab"},"content2")},q=(i.a.Component,n(441),function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"settings"},i.a.createElement("div",{className:"horizontal"},i.a.createElement(W,null),i.a.createElement(X,null),i.a.createElement(U,null)))}}]),t}(i.a.Component));var J=function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"splitWindow"},i.a.createElement(b,null),i.a.createElement(q,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[198,1,2]]]);
//# sourceMappingURL=main.3fdddb4c.chunk.js.map